apiVersion: skaffold/v2beta29
kind: Config
metadata:
  name: ${name}
build:
  artifacts:
    - image: ${name}
      sync:
        auto: true
      jib:
        type: gradle
        fromImage: 'amazoncorretto:11'
        args: [ ]
profiles:
  - name: local
    deploy:
      kustomize:
        paths: ["build/manifest/k8s/kustomize/local"]
        buildArgs: ["--enable-helm", "--load-restrictor=LoadRestrictionsNone"]
    build:
      local:
        push: false
      tagPolicy:
        gitCommit: { }
  - name: dev
    deploy:
      kustomize:
        paths: [ "build/manifest/k8s/kustomize/dev" ]
        buildArgs: [ "--enable-helm", "--load-restrictor=LoadRestrictionsNone" ]
    build:
      local:
        push: false
      tagPolicy:
        envTemplate:
          template: "{{.TAG}}"

